<div class="header">
  <div>
    <h3 tooltip="{{ variablesService.currentWallet.name }}" placement="bottom-left" tooltipClass="table-tooltip"
      [delay]="500" [showWhenNoOverflow]="false">{{variablesService.currentWallet.name}}</h3>
    <div *ngIf="!variablesService.currentWallet.is_auditable">
      <button [routerLink]="['/assign-alias']"
        *ngIf="!variablesService.currentWallet.alias.hasOwnProperty('name') && variablesService.currentWallet.loaded && variablesService.daemon_state === 2 && variablesService.currentWallet.alias_available">
        <i class="icon account"></i>
        <span>{{ 'WALLET.REGISTER_ALIAS' | translate }}</span>
      </button>
      <div class="alias"
        *ngIf="variablesService.currentWallet.alias.hasOwnProperty('name') && variablesService.currentWallet.loaded && variablesService.daemon_state === 2">
        <span>{{variablesService.currentWallet.alias['name']}}</span>
        <ng-container *ngIf="variablesService.currentWallet.alias_available">
          <i class="icon edit" [routerLink]="['/edit-alias']" tooltip="{{ 'WALLET.TOOLTIPS.EDIT_ALIAS' | translate }}"
            placement="bottom-right" tooltipClass="table-tooltip account-tooltip" [delay]="500" [timeDelay]="500"></i>
          <i class="icon transfer" [routerLink]="['/transfer-alias']"
            tooltip="{{ 'WALLET.TOOLTIPS.TRANSFER_ALIAS' | translate }}" placement="right"
            tooltipClass="table-tooltip account-tooltip" [delay]="500" [timeDelay]="500"></i>
        </ng-container>
      </div>
    </div>
  </div>
  <div class="settings-block">
    <button [disabled]="settingsButtonDisabled" (click)="openDropdown = !openDropdown">
      <i class="icon details">
        <svg id="wallet-dropdown-button" width="100%" height="100%" viewBox="0 0 20 21" fill="none"
          xmlns="http://www.w3.org/2000/svg">
          <path
            d="M0.96875 1.22266C0.96875 1.64258 1.31055 1.96484 1.7207 1.96484L18.4395 1.96484C18.8496 1.96484 19.1816 1.64258 19.1816 1.22266C19.1816 0.8125 18.8496 0.490234 18.4395 0.490234L1.7207 0.490234C1.31055 0.490234 0.96875 0.8125 0.96875 1.22266ZM0.96875 6.0957C0.96875 6.51562 1.31055 6.83789 1.7207 6.83789L18.4395 6.83789C18.8496 6.83789 19.1816 6.51562 19.1816 6.0957C19.1816 5.68555 18.8496 5.36328 18.4395 5.36328L1.7207 5.36328C1.31055 5.36328 0.96875 5.68555 0.96875 6.0957ZM0.96875 10.9687C0.96875 11.3887 1.31055 11.7109 1.7207 11.7109L18.4395 11.7109C18.8496 11.7109 19.1816 11.3887 19.1816 10.9688C19.1816 10.5586 18.8496 10.2363 18.4395 10.2363L1.7207 10.2363C1.31055 10.2363 0.96875 10.5586 0.96875 10.9687ZM7.08203 16.8965L9.24023 20.1289C9.63086 20.7051 10.4609 20.6855 10.8516 20.1289L13.0488 16.8965C13.5566 16.1445 13.2734 15.3535 12.375 15.3633L7.74609 15.3633C6.87695 15.3535 6.61328 16.1836 7.08203 16.8965Z"
            fill="#1F8FEB" />
        </svg>
      </i>
    </button>
    <div *ngIf="openDropdown" class="settings-dropdown">
      <button [routerLink]="['/details']" routerLinkActive="active"
        tooltip="{{ 'WALLET.TOOLTIPS.SETTINGS' | translate }}" placement="left"
        tooltipClass="table-tooltip account-tooltip" [delay]="500" [timeDelay]="500"
        [disabled]="settingsButtonDisabled">
        <i class="icon wallet-settings"></i><span>{{ 'WALLET_DETAILS.WALLET_OPTIONS' | translate }}</span>
      </button>
      <button tooltip="{{ 'EXPORT_HISTORY.TOOLTIP' | translate }}" placement="left"
        tooltipClass="table-tooltip account-tooltip" [delay]="500" [timeDelay]="500"
        (click)="exportHistoryDialogVisible = !exportHistoryDialogVisible"
        [disabled]="variablesService.currentWallet.history.length <= 0">
        <i class="icon export-history"><svg viewBox="0 0 18 18" width="100%" height="100%" fill="none"
            xmlns="http://www.w3.org/2000/svg">
            <path
              d="M8.95264 17.4736C13.5845 17.4736 17.4194 13.6304 17.4194 9.00684C17.4194 4.375 13.5762 0.540039 8.94434 0.540039C4.3208 0.540039 0.48584 4.375 0.48584 9.00684C0.48584 13.6304 4.3291 17.4736 8.95264 17.4736ZM8.95264 16.0625C5.03467 16.0625 1.90527 12.9248 1.90527 9.00684C1.90527 5.08887 5.02637 1.95117 8.94434 1.95117C12.8623 1.95117 16 5.08887 16.0083 9.00684C16.0166 12.9248 12.8706 16.0625 8.95264 16.0625ZM8.94434 9.77881C9.17676 9.77881 9.35938 9.60449 9.35938 9.38037V5.18018L9.34277 4.79004L9.70801 5.18018L10.0815 5.57031C10.1479 5.64502 10.2476 5.68652 10.3721 5.68652C10.5962 5.68652 10.7539 5.53711 10.7539 5.32129C10.7539 5.22168 10.7207 5.12207 10.6294 5.04736L9.24316 3.70264C9.14355 3.60303 9.04395 3.56152 8.94434 3.56152C8.84473 3.56152 8.74512 3.61133 8.65381 3.70264L7.25928 5.03906C7.16797 5.13037 7.14307 5.22168 7.14307 5.32129C7.14307 5.53711 7.30078 5.68652 7.5166 5.68652C7.63281 5.68652 7.74072 5.64502 7.80713 5.57031L8.18066 5.18018L8.5542 4.79004L8.5376 5.18018V9.38037C8.5376 9.60449 8.72021 9.77881 8.94434 9.77881ZM6.60352 13.041H11.3018C12.2065 13.041 12.6797 12.5762 12.6797 11.6797V7.5874C12.6797 6.69092 12.2065 6.23438 11.3018 6.23438H10.0732V7.07275H11.2935C11.6587 7.07275 11.8413 7.25537 11.8413 7.62891V11.6548C11.8413 12.02 11.6587 12.2109 11.2935 12.2109H6.61182C6.24658 12.2109 6.06396 12.0283 6.06396 11.6548V7.62891C6.06396 7.25537 6.24658 7.07275 6.61182 7.07275H7.84033V6.23438H6.60352C5.70703 6.23438 5.23389 6.69922 5.22559 7.5874V11.6797C5.23389 12.5679 5.70703 13.041 6.60352 13.041Z"
              fill="white" />
          </svg></i><span>{{ 'EXPORT_HISTORY.EXPORT_BUTTON' | translate }}</span>
      </button>
      <button type="button" (click)="showConfirmDialog(variablesService.currentWallet.wallet_id)"
        tooltip="{{ 'WALLET.TOOLTIPS.CLOSE' | translate }}" placement="top-left"
        tooltipClass="table-tooltip account-tooltip" [delay]="500" [timeDelay]="500">
        <i class="icon close-wallet"></i><span>{{ 'WALLET_DETAILS.BUTTON_REMOVE' | translate }}</span>
      </button>
    </div>
  </div>
</div>
<div class="address">
  <span>{{variablesService.currentWallet.address}}</span>
  <i class="icon" [class.copy]="!copyAnimation" [class.copied]="copyAnimation" (click)="copyAddress()"></i>
</div>

<div class="balance">
  <span [tooltip]="getTooltip()" [placement]="'bottom'" [tooltipClass]="'balance-tooltip'" [delay]="150" [timeout]="0"
    (onHide)="onHideTooltip()">{{variablesService.currentWallet.balance | intToMoney : '3'}}
    {{variablesService.defaultCurrency}}</span>
  <span>${{variablesService.currentWallet.getMoneyEquivalent(variablesService.moneyEquivalent) | intToMoney | number :
    '1.2-2'}}</span>
  <span class="price-percent">+4.6%</span>
</div>
<div class="tabs">
  <div class="tabs-header">
    <ng-container *ngFor="let tab of tabs; let index = index">
      <div class="tab" [class.active]="tab.active"
        [ngClass]="{ 'hide': ((tab.link === '/send' || tab.link === '/contracts') && variablesService.currentWallet.is_watch_only && variablesService.currentWallet.is_auditable) }"
        [class.disabled]="((tab.link === '/send' || tab.link === '/contracts' || tab.link === '/staking') && (variablesService.daemon_state !== 2 || !variablesService.currentWallet.loaded))
                || ((tab.link === '/send' || tab.link === '/contracts') && variablesService.currentWallet.is_watch_only && variablesService.currentWallet.is_auditable)"
        (click)="changeTab(index)" (mouseover)="itemHovered(index, true)" (mouseleave)="itemHovered(index, false)">
        <i class="icon" [ngClass]="tab.icon" [class.hovered]="tab.itemHovered"></i>
        <span>{{ tab.title | translate }}</span>
        <span class="indicator" *ngIf="tab.indicator">{{variablesService.currentWallet.new_contracts}}</span>
      </div>
    </ng-container>
  </div>
  <div #scrolledContent class="tabs-content scrolled-content">
    <router-outlet></router-outlet>
  </div>
  <div *ngIf="activeTab === 'history'" class="pagination-wrapper">
    <div class="pagination">
      <div>
        <button [ngClass]="{'disabled': sync_started || wallet}"
          [disabled]="variablesService.currentWallet.currentPage === 1 || sync_started || wallet"
          (click)="setPage(variablesService.currentWallet.currentPage - 1)">
          <svg class="icon" viewBox="0 0 17 17" width="100%" height="100%" fill="none"
            xmlns="http://www.w3.org/2000/svg">
            <path
              d="M8.63281 16.3281C12.9922 16.3281 16.6016 12.7109 16.6016 8.35938C16.6016 4 12.9844 0.390625 8.625 0.390625C4.27344 0.390625 0.664062 4 0.664062 8.35938C0.664062 12.7109 4.28125 16.3281 8.63281 16.3281ZM4.49219 8.35156C4.49219 8.17188 4.55469 8.04688 4.71875 7.88281L7.4375 5.14844C7.54688 5.03906 7.6875 4.98438 7.85938 4.98438C8.19531 4.98438 8.44531 5.23438 8.44531 5.57031C8.44531 5.74219 8.36719 5.89062 8.26562 6.00781L7.26562 7L6.29688 7.8125L8 7.74219H12.1797C12.5312 7.74219 12.7891 7.99219 12.7891 8.35156C12.7891 8.70312 12.5391 8.95312 12.1797 8.95312H8L6.28906 8.89062L7.26562 9.70312L8.26562 10.6953C8.375 10.8047 8.44531 10.9531 8.44531 11.125C8.44531 11.4609 8.19531 11.7188 7.85938 11.7188C7.6875 11.7188 7.54688 11.6562 7.4375 11.5469L4.71875 8.82031C4.57031 8.67188 4.49219 8.53125 4.49219 8.35156Z"
              fill="#FDFEFF" fill-opacity="0.3" />
          </svg>
        </button>

        <ng-container *ngIf="!mining">
          <button [disabled]="sync_started || wallet" *ngFor="let page of variablesService.currentWallet.pages"
            [ngClass]="{ 'active': variablesService.currentWallet.currentPage === page,'disabled': sync_started || wallet }"
            (click)="setPage(page)">{{page}}</button>
        </ng-container>

        <ng-container *ngIf="mining">
          <button
            [ngClass]="{ 'active': variablesService.currentWallet.currentPage, 'disabled': sync_started || wallet}"
            [disabled]="stop_paginate || sync_started || wallet"
            (click)="setPage(variablesService.currentWallet.currentPage)">
            {{variablesService.currentWallet.currentPage}}
          </button>
        </ng-container>

        <button [disabled]="stop_paginate || sync_started || wallet" [ngClass]="{'disabled': sync_started || wallet}"
          (click)="setPage(variablesService.currentWallet.currentPage + 1)">
          <svg class="icon" viewBox="0 0 17 17" width="100%" height="100%" fill="none"
            xmlns="http://www.w3.org/2000/svg">
            <path
              d="M8.63281 16.3281C12.9922 16.3281 16.6016 12.7109 16.6016 8.35938C16.6016 4 12.9844 0.390625 8.625 0.390625C4.27344 0.390625 0.664062 4 0.664062 8.35938C0.664062 12.7109 4.28125 16.3281 8.63281 16.3281ZM12.7656 8.35156C12.7656 8.53125 12.6953 8.67188 12.5391 8.82031L9.82031 11.5469C9.71094 11.6562 9.57031 11.7188 9.39844 11.7188C9.0625 11.7188 8.8125 11.4609 8.8125 11.125C8.8125 10.9531 8.88281 10.8047 8.99219 10.6953L9.99219 9.70312L10.9688 8.89062L9.26562 8.95312H5.07812C4.72656 8.95312 4.46875 8.70312 4.46875 8.35156C4.46875 7.99219 4.72656 7.74219 5.07812 7.74219H9.26562L10.9688 7.8125L9.99219 7L8.99219 6.00781C8.89062 5.89062 8.8125 5.74219 8.8125 5.57031C8.8125 5.23438 9.0625 4.98438 9.39844 4.98438C9.57031 4.98438 9.71094 5.03906 9.82031 5.14844L12.5391 7.88281C12.7031 8.04688 12.7656 8.17188 12.7656 8.35156Z"
              fill="#FDFEFF" fill-opacity="0.3" />
          </svg>
        </button>

      </div>
      <div class="mining-transaction-switch">
        <span class="switch-text">Hide mining transactions</span>
        <div class="switch" [ngClass]="{'disabled': sync_started || wallet}"
          (click)="toggleMiningTransactions(); $event.stopPropagation()" [class.on]="mining" [class.off]="!mining">
          <span class="circle"></span>
        </div>
      </div>
    </div>
  </div>
</div>
<app-confirm-modal *ngIf="delWalletDialogVisible" [title]=" 'WALLET.CONFIRM.TITLE' | translate "
  [message]=" 'WALLET.CONFIRM.MESSAGE' | translate " (confirmed)="confirmed($event)"></app-confirm-modal>
<app-export-history-modal [currentWalletId]="variablesService.currentWallet.wallet_id"
  *ngIf="exportHistoryDialogVisible" (closeExportModal)="closeExportModal($event)">
</app-export-history-modal>
