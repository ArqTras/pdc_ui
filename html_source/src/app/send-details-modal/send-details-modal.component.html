<div class="modal flex p-2 border-radius-0_8-rem bg-light-blue max-w-54-rem w-100 max-h-100">
    <div class="wrapper w-100 flex flex__direction-column">
        <h3 class="title mb-2 flex_0_0_auto">{{ 'SEND_DETAILS_MODAL.TITLE1' | translate }}</h3>

        <div class="content mb-2 flex_1_1_auto overflow-y-auto overflow-x-hidden">
            <div class="status mb-2 flex flex__direction-column flex__align-center">

                <div *ngIf="isSentSuccess"
                     class="image">
                    <img src="assets/icons/aqua/transaction_success.svg"
                         alt="success">
                </div>

                <div *ngIf="isSentFailed"
                     class="image">
                    <img class="image"
                         src="assets/icons/red/transaction_failed.svg"
                         alt="failed">
                </div>

                <div *ngIf="!isSentSuccess && !isSentFailed"
                     class="loader"></div>

                <p class="color-primary mt-2">
                    {{ ((currentActionState$ | async) ? 'TOR_LIB_STATE' + '.' + (currentActionState$ | async)?.status : 'TOR_LIB_STATE.STATE_INITIALIZING') | translate }}
                    {{!isSentSuccess && !isSentFailed ? '...' : ''}}
                </p>

            </div>

            <div class="details w-100 flex flex__direction-column border-radius-0_8-rem overflow-hidden">
                <div class="header flex flex__justify-between flex__align-center overflow-hidden py-1 px-2 w-100 cursor-pointer"
                     (click)="isDetailsNotEmpty && toggleDetails()">
                    <p class="title text-ellipsis mr-2">{{ 'SEND_DETAILS_MODAL.TITLE2' | translate }}</p>
                    <button *ngIf="isDetailsNotEmpty"
                            class="flex flex__justify-center flex__align-center">
                        <img *ngIf="!(stateDetails$ | async)"
                             src="assets/icons/white/dropdown-arrow-down.svg"
                             alt="dropdown-arrow-down">
                        <img *ngIf="(stateDetails$ | async)"
                             src="assets/icons/white/dropdown-arrow-up.svg"
                             alt="dropdown-arrow-up">
                    </button>
                </div>
                <div #elDetailsWrapper
                     class="details-wrapper overflow-y-auto scrolled-content">
                    <ul class="details-list px-2 py-1"
                        *ngIf="stateDetails$ | async">
                        <li class="item flex flex__align-center flex-nowrap mb-1 color-primary"
                            *ngFor="let action of (currentActionStates$ | async); let last = last; trackBy: trackBy">
                            <span class="text text-ellipsis mr-1">{{ 'TOR_LIB_STATE' + '.' + action?.status | translate }}{{ last && !isSentSuccess && !isSentFailed ? '...' : '' }}</span>
                            <ng-container *ngIf="!last">
                                <img *ngIf="isSuccess(action)"
                                     class="image"
                                     src="assets/icons/blue/check_with_blue_bg.svg"
                                     alt="success">

                                <img *ngIf="isFailed(action)"
                                     class="image"
                                     src="assets/icons/red/transaction_failed.svg"
                                     alt="failed">
                            </ng-container>

                            <ng-container *ngIf="last">
                                <img *ngIf="last && isSentSuccess"
                                     class="image"
                                     src="assets/icons/blue/check_with_blue_bg.svg"
                                     alt="success">

                                <img *ngIf="last && isSentFailed"
                                     class="image"
                                     src="assets/icons/red/transaction_failed.svg"
                                     alt="failed">
                            </ng-container>
                        </li>

                        <ng-container *ngIf="(responseData$ | async)">
                            <li class="item flex flex__align-center flex-nowrap mb-1 color-primary">
                                <span class="word-break-break-all">tx id: {{ (responseData$ | async).response_data.tx_hash }}</span>
                            </li>
                            <li class="item flex flex__align-center flex-nowrap mb-1 color-primary">
                                <div class="word-break-break-all">tx
                                                                  size: {{ (responseData$ | async).response_data.tx_blob_size }}
                                                                  bytes
                                </div>
                            </li>
                        </ng-container>
                    </ul>
                </div>
            </div>
        </div>
        <div class="controls w-100 flex_0_0_auto">
            <button class="primary big w-100"
                    [disabled]="!isSentSuccess && !isSentFailed"
                    (click)="close.emit()">{{ 'Ok' | translate }}</button>
        </div>
    </div>
</div>
